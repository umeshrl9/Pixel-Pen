<%- include("partials/header.ejs") %>

<div class="mainBody py-5">
  <div class="container">
    <% if(blogs.length == 0) { %>
      <div class="text-center py-5">
        <h3 class="mb-4">You havenâ€™t created a blog yet</h3>
        <button onclick="location.href='/create'" class="btn btn-primary me-2">Create Blog</button>
        <button onclick="location.href='/logout'" class="btn btn-outline-light">Logout</button>
      </div>
    <% } else { %>

      <div class="row g-4">
        <% blogs.forEach(blog => { %>
          <div class="col-lg-4 col-md-6">
            <div class="card h-100 text-bg-dark shadow-lg border-0">
              <div class="card-body d-flex flex-column">
                <h3 class="card-title mb-3">
                  <a class="text-decoration-none text-info" href="/blogs/<%= blog.id %>"><%= blog.title %></a>
                </h3>
                <p class="card-text flex-grow-1" style="white-space: pre-wrap;"><%= blog.content.substring(0, 150) %>...</p>
                <div class="mt-3 d-flex justify-content-between">
                  <button onclick="location.href='/edit/<%= blog.id %>'" class="btn btn-sm btn-outline-light">Edit</button>
                  <form action="/delete" method="POST" style="display:inline;">
                    <input type="hidden" name="id" value="<%= blog.id %>">
                    <button type="submit" class="btn btn-sm btn-danger">Delete</button>
                  </form>
                </div>
              </div>
            </div>
          </div>
        <% }) %>
      </div>

      <div class="text-center mt-5">
        <button onclick="location.href='/create'" class="btn btn-primary me-2">Create Blog</button>
        <button onclick="location.href='/logout'" class="btn btn-outline-light">Logout</button>
      </div>

    <% } %>
  </div>
</div>

<%- include("partials/footer.ejs") %>
